(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="./dist/";return __webpack_require__(0)})([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";var widget=__webpack_require__(2);var domready=__webpack_require__(16);var list=[];domready(function(){var elems=document.querySelectorAll("[f-tpl]");for(var i=0;i<elems.length;i++){list.push(new widget(elems[i]))}})},function(module,exports,__webpack_require__){'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var proxy=__webpack_require__(3);var utils=__webpack_require__(15);var htmlParserLibrary=__webpack_require__(4);var htmlParser=new htmlParserLibrary();var svd=__webpack_require__(8);var el=svd.el;var diff=svd.diff;var patch=svd.patch;var widget=function(){function widget(domNode){_classCallCheck(this,widget);this.$timer=null;this.$element=domNode;this.$tpl=domNode.outerHTML.replace(/[\r\n]/g,"");var data=null;var _data=domNode.getAttribute('f-tpl');this.$dataKey=_data;if(window[_data]){data=window[_data]}if(data){this.$data=data;this.initProxy()}this.initFactory();this.render()}_createClass(widget,[{key:'initFactory',value:function initFactory(){var code=';(function(){ var buffer = [];buffer.push(\'';var code2=this.$tpl.replace(/\{\{([\s\S]+?)\}\}|[^\{\{]+/g,function(matched,a){if(!a){return matched.replace(/[\\"']/g,'\\$&').replace(/\u0000/g,'\\0')}else{a=utils.htmlspecialchars_decode(a)}if(a.indexOf('for')>-1||a.indexOf('}')>-1){return'\');'+a+" buffer.push(\'"}else{return'\'); buffer.push('+a+');buffer.push(\''}});var finalCode=code+code2+'\'); var ret = buffer.join(""); return ret; });';console.log(finalCode);this.$factory=eval(finalCode)}},{key:'initProxy',value:function initProxy(){window[this.$dataKey]=this.$proxy=proxy(this.$data,this)}},{key:'render',value:function render(){var _this=this;if(this.$timer){clearTimeout(this.$timer);this.$timer=null}this.$timer=setTimeout(function(){var html=_this.$factory();var vm=_this.parseHTML(html);var vdom=_this.convertVirtualDom(vm.childNodes[0]);console.log(vdom);if(_this.$vdom){var patches=diff(_this.$vdom,vdom);patch(_this.$element,patches)}else{var realDom=vdom.render();_this.$element.parentNode.replaceChild(realDom,_this.$element);_this.$element=realDom}_this.$vdom=vdom},0)}},{key:'parseHTML',value:function parseHTML(html){var root=htmlParser.parse(html);return root}},{key:'convertVirtualDom',value:function convertVirtualDom(node){return el(node.tagName,node.attrs,this.generateVirtualDomNode(node.childNodes))}},{key:'generateVirtualDomNode',value:function generateVirtualDomNode(nodes){var ret=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=nodes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var node=_step.value;if(node.nodeType==1){ret.push(el(node.tagName,node.attrs,this.generateVirtualDomNode(node.childNodes)))}else if(node.nodeType==3){ret.push(node.textContent)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError;}}}return ret}}]);return widget}();module.exports=widget},function(module,exports,__webpack_require__){'use strict';var DIRTYCHECK_TIME=30;var utils=__webpack_require__(15);var hasProxy=typeof window.Proxy!=='undefined';var _Proxy=hasProxy&&window.Proxy||function(){var list=[];var lastLength=-1;var copy=function copy(obj){return JSON.parse(JSON.stringify(obj))};var frame=function frame(flag){var callback=function callback(){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=list[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var item=_step.value;item.dirtyCheck()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError;}}}if(flag){window.requestAnimationFrame(callback)}};return callback};window.requestAnimationFrame&&window.requestAnimationFrame(frame(true))||setInterval(frame(false),DIRTYCHECK_TIME);return function(target,handler){var _source=JSON.stringify(target);this.dirtyCheck=function(){var now=JSON.stringify(target);if(now!=_source){handler.set.call()}_source=now;return};list.push(this);return target}}();function proxyFactory(data,widget){var handler={set:function set(obj,key,val,proxy){if(hasProxy){if(val&&utils.is(val,'array')){obj[key]=proxyFactory(val,widget)}else if(val&&utils.is(val,'object')){obj[key]=proxyFactory(val,widget)}else{obj[key]=val}}widget.render();return true}};var proxy=new _Proxy(data,handler);if(hasProxy){for(var i in proxy){proxy[i]=proxy[i]}return proxy}else{return data}}module.exports=proxyFactory},function(module,exports,__webpack_require__){'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Parser=__webpack_require__(5);var HtmlScanner=__webpack_require__(6);var HtmlParser=function(_Parser){_inherits(HtmlParser,_Parser);function HtmlParser(options){_classCallCheck(this,HtmlParser);options=options||{};if(!options.scanner){options.scanner=new HtmlScanner()}return _possibleConstructorReturn(this,(HtmlParser.__proto__||Object.getPrototypeOf(HtmlParser)).call(this,options))}_createClass(HtmlParser,[{key:'parse',value:function parse(html){_get(HtmlParser.prototype.__proto__||Object.getPrototypeOf(HtmlParser.prototype),'parse',this).call(this,html);var tree=this.scanner.getRootNode();this.scanner.reset();return tree}}]);return HtmlParser}(Parser);exports=module.exports=HtmlParser;exports.RawHtmlParser=Parser;exports.HtmlScanner=HtmlScanner},function(module,exports){'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var attrRe=/([^=\s]+)(\s*=\s*(("([^"]*)")|('([^']*)')|[^>\s]+))?/gm;var endTagRe=/^<\/([^>\s]+)[^>]*>/m;var startTagRe=/^<([^>\s\/]+)((\s+[^=>\s]+(\s*=\s*(("[^"]*")|('[^']*')|[^>\s]+))?)*)\s*\/?\s*>/m;var selfCloseTagRe=/\s*\/\s*>\s*$/m;var mustImplementMethod=function mustImplementMethod(name){throw new Error('Must implement the method '+(name||''));};var HtmlParser=function(){function HtmlParser(options){_classCallCheck(this,HtmlParser);options=options||{};if(options.scanner){this.scanner=options.scanner;options.scanner=null}this.options=Object.assign({},HtmlParser.defaults,options)}_createClass(HtmlParser,[{key:'parse',value:function parse(html){var treatAsChars=false;var index=void 0,match=void 0,characters=void 0;while(html.length){if(html.substring(0,4)==='<!--'){index=html.indexOf('-->');if(index!==-1){this.scanner.comment(html.substring(4,index));html=html.substring(index+3);treatAsChars=false}else{treatAsChars=true}}else if(html.substring(0,2)==='</'){match=this.endTagRe.exec(html);if(match){html=RegExp.rightContext;treatAsChars=false;this.parseEndTag(RegExp.lastMatch,match[1])}else{treatAsChars=true}}else if(html.charAt(0)==='<'){match=this.startTagRe.exec(html);if(match){html=RegExp.rightContext;treatAsChars=false;this.parseStartTag(RegExp.lastMatch,match[1],match)}else{treatAsChars=true}}if(treatAsChars){index=html.indexOf('<');if(index===-1){characters=html;html=''}else{characters=html.substring(0,index);html=html.substring(index)}if(!this.options.ignoreWhitespaceText||!/^\s*$/.test(characters)){this.scanner.characters(characters)}}treatAsChars=true;match=null}}},{key:'parseStartTag',value:function parseStartTag(input,tagName,match){var isSelfColse=selfCloseTagRe.test(input);var attrInput=match[2];if(isSelfColse){attrInput=attrInput.replace(/\s*\/\s*$/,'')}var attrs=this.parseAttributes(tagName,attrInput);this.scanner.startElement(tagName,attrs,isSelfColse,match[0])}},{key:'parseEndTag',value:function parseEndTag(input,tagName){this.scanner.endElement(tagName)}},{key:'parseAttributes',value:function parseAttributes(tagName,input){var attrs={};input.replace(this.attrRe,function(attr,name,c2,value,c4,valueInQuote,c6,valueInSingleQuote){attrs[name]=valueInSingleQuote||valueInQuote||value||true});return attrs}}]);return HtmlParser}();HtmlParser.defaults={ignoreWhitespaceText:false};HtmlParser.prototype.attrRe=attrRe;HtmlParser.prototype.endTagRe=endTagRe;HtmlParser.prototype.startTagRe=startTagRe;HtmlParser.prototype.scanner={startElement:function startElement(){mustImplementMethod('startElement')},endElement:function endElement(){mustImplementMethod('endElement')},characters:function characters(){mustImplementMethod('characters')},comment:function comment(){mustImplementMethod('comment')}};module.exports=HtmlParser},function(module,exports,__webpack_require__){'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Node=__webpack_require__(7);var _Node$NODE_TYPE=Node.NODE_TYPE,ELEMENT_NODE=_Node$NODE_TYPE.ELEMENT_NODE,TEXT_NODE=_Node$NODE_TYPE.TEXT_NODE,COMMENT_NODE=_Node$NODE_TYPE.COMMENT_NODE,DOCUMENT_NODE=_Node$NODE_TYPE.DOCUMENT_NODE,DOCUMENT_TYPE_NODE=_Node$NODE_TYPE.DOCUMENT_TYPE_NODE;var DoctypeNode=Node.DoctypeNode,DocumentNode=Node.DocumentNode;var doctypeRe=/^\s*<!doctype\s+(html)(\s+public(\s+('[^']+'|"[^"]+"))?(\s+('[^']+'|"[^"]+"))?)?\s*/i;var elementProcessor={doctype:function doctype(ctx,tagName,attrs,isSelfColse,input){var parentNode=ctx.path[ctx.path.length-1];var parts=doctypeRe.exec(input)||[];var node=new DoctypeNode({tagName:'doctype',nodeType:DOCUMENT_TYPE_NODE,parentNode:parentNode,name:parts[1],publicId:parts[4]&&parts[4].substring(1,parts[4].length-1),systemId:parts[6]&&parts[6].substring(1,parts[6].length-1)});parentNode.appendChild(node)},_default:function _default(ctx,tagName,attrs,isSelfColse,input){var parentNode=ctx.path[ctx.path.length-1];var node=new Node({tagName:tagName,nodeType:ELEMENT_NODE,attrs:attrs,parentNode:parentNode});parentNode.appendChild(node);if(!isSelfColse){ctx.path.push(node)}},_selfCloseTag:function _selfCloseTag(ctx,tagName,attrs,isSelfColse,input){elementProcessor._default(ctx,tagName,attrs,true,input)}};elementProcessor['!doctype']=elementProcessor['doctype'];['area','base','link','br','hr','col','command','embed','img','input','keygen','meta','param','source','track','wbr'].forEach(function(tag){elementProcessor[tag]=elementProcessor._selfCloseTag});var HtmlScanner=function(){function HtmlScanner(){_classCallCheck(this,HtmlScanner);this.reset()}_createClass(HtmlScanner,[{key:'reset',value:function reset(){this.rootNode=new DocumentNode({tagName:'document',nodeType:DOCUMENT_NODE});this.path=[this.rootNode]}},{key:'getRootNode',value:function getRootNode(){return this.rootNode}},{key:'startElement',value:function startElement(tagName,attrs,isSelfColse,input){tagName=tagName.toLowerCase();if(elementProcessor[tagName]){return elementProcessor[tagName](this,tagName,attrs,isSelfColse,input)}return elementProcessor._default(this,tagName,attrs,isSelfColse,input)}},{key:'endElement',value:function endElement(tagName){this.path.pop()}},{key:'characters',value:function characters(text){if(/^\s*$/.test(text))return;var currentNode=this.path[this.path.length-1];var node=new Node({tagName:'text',nodeType:TEXT_NODE,textContent:text,parentNode:currentNode});currentNode.appendChild(node)}},{key:'comment',value:function comment(text){var currentNode=this.path[this.path.length-1];var node=new Node({tagName:'comment',nodeType:COMMENT_NODE,textContent:text,parentNode:currentNode});currentNode.appendChild(node)}}]);return HtmlScanner}();module.exports=HtmlScanner},function(module,exports){'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ELEMENT_NODE=1;var TEXT_NODE=3;var COMMENT_NODE=8;var DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=10;var Node=function(){function Node(_ref){var tagName=_ref.tagName,nodeType=_ref.nodeType,attrs=_ref.attrs,textContent=_ref.textContent,parentNode=_ref.parentNode,childNodes=_ref.childNodes;_classCallCheck(this,Node);this.tagName=tagName;this.nodeType=nodeType;this.textContent=textContent;this.parentNode=parentNode;this.attrs=attrs;this.childNodes=childNodes||[];if(nodeType===ELEMENT_NODE){if(attrs.id)this.id=attrs.id;if(attrs.class)this.className=attrs.class}}_createClass(Node,[{key:'appendChild',value:function appendChild(node){if(node){node.parentNode=this;this.childNodes.push(node)}}},{key:'insertAfter',value:function insertAfter(node,targetNode){var _this=this;if(!targetNode)return this.appendChild(node);this.childNodes.some(function(n,i){if(n===targetNode){node.parentNode=_this;_this.childNodes.splice(i,0,node);return true}})}},{key:'insertBefore',value:function insertBefore(node,targetNode){var _this2=this;if(!targetNode)return this.appendChild(node);this.childNodes.some(function(n,i){if(n===targetNode){node.parentNode=_this2;i===0?_this2.childNodes.unshift(node):_this2.childNodes.splice(i-1,0,node);return true}})}},{key:'toJSON',value:function toJSON(){var json={tagName:this.tagName,nodeType:this.nodeType};if(this.childNodes.length)json.childNodes=this.childNodes;if(this.textContent)json.textContent=this.textContent;if(this.attrs)json.attrs=this.attrs;if(this.id)json.id=this.id;if(this.className)json.className=this.className;return json}},{key:'getElementsByTagName',value:function getElementsByTagName(tagName){}},{key:'getElementsByClassName',value:function getElementsByClassName(className){}}]);return Node}();exports=module.exports=Node;exports.NODE_TYPE={ELEMENT_NODE:ELEMENT_NODE,TEXT_NODE:TEXT_NODE,COMMENT_NODE:COMMENT_NODE,DOCUMENT_NODE:DOCUMENT_NODE,DOCUMENT_TYPE_NODE:DOCUMENT_TYPE_NODE};var DoctypeNode=function(_Node){_inherits(DoctypeNode,_Node);function DoctypeNode(options){_classCallCheck(this,DoctypeNode);var _this3=_possibleConstructorReturn(this,(DoctypeNode.__proto__||Object.getPrototypeOf(DoctypeNode)).call(this,options));_this3.id=undefined;_this3.nodeType=DOCUMENT_TYPE_NODE;_this3.systemId=options.systemId||'';_this3.publicId=options.publicId||'';_this3.name=options.name||'html';return _this3}_createClass(DoctypeNode,[{key:'toJSON',value:function toJSON(){return{tagName:this.tagName,nodeType:this.nodeType,publicId:this.publicId,systemId:this.systemId,name:this.name}}}]);return DoctypeNode}(Node);var DocumentNode=function(_Node2){_inherits(DocumentNode,_Node2);function DocumentNode(){_classCallCheck(this,DocumentNode);return _possibleConstructorReturn(this,(DocumentNode.__proto__||Object.getPrototypeOf(DocumentNode)).apply(this,arguments))}_createClass(DocumentNode,[{key:'getElementById',value:function getElementById(id){if(!id)return null;return iterate(this.childNodes);function iterate(nodes){var result=void 0;nodes.some(function(node){if(node.nodeType!==ELEMENT_NODE)return false;if(node.id===id)return result=node;return result=iterate(node.childNodes)});return result}}}]);return DocumentNode}(Node);exports.DoctypeNode=DoctypeNode;exports.DocumentNode=DocumentNode},function(module,exports,__webpack_require__){'use strict';exports.el=__webpack_require__(9);exports.diff=__webpack_require__(11);exports.patch=__webpack_require__(12)},function(module,exports,__webpack_require__){'use strict';var _=__webpack_require__(10);function Element(tagName,props,children){if(!(this instanceof Element)){return new Element(tagName,props,children)}if(_.isArray(props)){children=props;props={}}this.tagName=tagName;this.props=props||{};this.children=children||[];this.key=props?props.key:void 666;var count=0;_.each(this.children,function(child,i){if(child instanceof Element){count+=child.count}else{children[i]=''+child}count++});this.count=count}Element.prototype.render=function(){var el=document.createElement(this.tagName);var props=this.props;for(var propName in props){var propValue=props[propName];_.setAttr(el,propName,propValue)}_.each(this.children,function(child){var childEl=child instanceof Element?child.render():document.createTextNode(child);el.appendChild(childEl)});return el};module.exports=Element},function(module,exports){'use strict';var _=exports;_.type=function(obj){return Object.prototype.toString.call(obj).replace(/\[object\s|\]/g,'')};_.isArray=function isArray(list){return _.type(list)==='Array'};_.isString=function isString(list){return _.type(list)==='String'};_.each=function each(array,fn){for(var i=0,len=array.length;i<len;i++){fn(array[i],i)}};_.toArray=function toArray(listLike){if(!listLike){return[]}var list=[];for(var i=0,len=listLike.length;i<len;i++){list.push(listLike[i])}return list};_.setAttr=function setAttr(node,key,value){switch(key){case'style':node.style.cssText=value;break;case'value':var tagName=node.tagName||'';tagName=tagName.toLowerCase();if(tagName==='input'||tagName==='textarea'){node.value=value}else{node.setAttribute(key,value)}break;default:node.setAttribute(key,value);break}}},function(module,exports,__webpack_require__){'use strict';var _=__webpack_require__(10);var patch=__webpack_require__(12);var listDiff=__webpack_require__(13);function diff(oldTree,newTree){var index=0;var patches={};dfsWalk(oldTree,newTree,index,patches);return patches}function dfsWalk(oldNode,newNode,index,patches){var currentPatch=[];if(newNode===null){}else if(_.isString(oldNode)&&_.isString(newNode)){if(newNode!==oldNode){currentPatch.push({type:patch.TEXT,content:newNode})}}else if(oldNode.tagName===newNode.tagName&&oldNode.key===newNode.key){var propsPatches=diffProps(oldNode,newNode);if(propsPatches){currentPatch.push({type:patch.PROPS,props:propsPatches})}if(!isIgnoreChildren(newNode)){diffChildren(oldNode.children,newNode.children,index,patches,currentPatch)}}else{currentPatch.push({type:patch.REPLACE,node:newNode})}if(currentPatch.length){patches[index]=currentPatch}}function diffChildren(oldChildren,newChildren,index,patches,currentPatch){var diffs=listDiff(oldChildren,newChildren,'key');newChildren=diffs.children;if(diffs.moves.length){var reorderPatch={type:patch.REORDER,moves:diffs.moves};currentPatch.push(reorderPatch)}var leftNode=null;var currentNodeIndex=index;_.each(oldChildren,function(child,i){var newChild=newChildren[i];currentNodeIndex=leftNode&&leftNode.count?currentNodeIndex+leftNode.count+1:currentNodeIndex+1;dfsWalk(child,newChild,currentNodeIndex,patches);leftNode=child})}function diffProps(oldNode,newNode){var count=0;var oldProps=oldNode.props;var newProps=newNode.props;var key,value;var propsPatches={};for(key in oldProps){value=oldProps[key];if(newProps[key]!==value){count++;propsPatches[key]=newProps[key]}}for(key in newProps){value=newProps[key];if(!oldProps.hasOwnProperty(key)){count++;propsPatches[key]=newProps[key]}}if(count===0){return null}return propsPatches}function isIgnoreChildren(node){return node.props&&node.props.hasOwnProperty('ignore')}module.exports=diff},function(module,exports,__webpack_require__){'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _=__webpack_require__(10);var REPLACE=0;var REORDER=1;var PROPS=2;var TEXT=3;function patch(node,patches){var walker={index:0};dfsWalk(node,walker,patches)}function dfsWalk(node,walker,patches){var currentPatches=patches[walker.index];var len=node.childNodes?node.childNodes.length:0;for(var i=0;i<len;i++){var child=node.childNodes[i];walker.index++;dfsWalk(child,walker,patches)}if(currentPatches){applyPatches(node,currentPatches)}}function applyPatches(node,currentPatches){_.each(currentPatches,function(currentPatch){switch(currentPatch.type){case REPLACE:var newNode=typeof currentPatch.node==='string'?document.createTextNode(currentPatch.node):currentPatch.node.render();node.parentNode.replaceChild(newNode,node);break;case REORDER:reorderChildren(node,currentPatch.moves);break;case PROPS:setProps(node,currentPatch.props);break;case TEXT:if(node.textContent){node.textContent=currentPatch.content}else{node.nodeValue=currentPatch.content}break;default:throw new Error('Unknown patch type '+currentPatch.type);}})}function setProps(node,props){for(var key in props){if(props[key]===void 666){node.removeAttribute(key)}else{var value=props[key];_.setAttr(node,key,value)}}}function reorderChildren(node,moves){var staticNodeList=_.toArray(node.childNodes);var maps={};_.each(staticNodeList,function(node){if(node.nodeType===1){var key=node.getAttribute('key');if(key){maps[key]=node}}});_.each(moves,function(move){var index=move.index;if(move.type===0){if(staticNodeList[index]===node.childNodes[index]){node.removeChild(node.childNodes[index])}staticNodeList.splice(index,1)}else if(move.type===1){var insertNode=maps[move.item.key]?maps[move.item.key]:_typeof(move.item)==='object'?move.item.render():document.createTextNode(move.item);staticNodeList.splice(index,0,insertNode);node.insertBefore(insertNode,node.childNodes[index]||null)}})}patch.REPLACE=REPLACE;patch.REORDER=REORDER;patch.PROPS=PROPS;patch.TEXT=TEXT;module.exports=patch},function(module,exports,__webpack_require__){'use strict';module.exports=__webpack_require__(14).diff},function(module,exports){'use strict';function diff(oldList,newList,key){var oldMap=makeKeyIndexAndFree(oldList,key);var newMap=makeKeyIndexAndFree(newList,key);var newFree=newMap.free;var oldKeyIndex=oldMap.keyIndex;var newKeyIndex=newMap.keyIndex;var moves=[];var children=[];var i=0;var item;var itemKey;var freeIndex=0;while(i<oldList.length){item=oldList[i];itemKey=getItemKey(item,key);if(itemKey){if(!newKeyIndex.hasOwnProperty(itemKey)){children.push(null)}else{var newItemIndex=newKeyIndex[itemKey];children.push(newList[newItemIndex])}}else{var freeItem=newFree[freeIndex++];children.push(freeItem||null)}i++}var simulateList=children.slice(0);i=0;while(i<simulateList.length){if(simulateList[i]===null){remove(i);removeSimulate(i)}else{i++}}var j=i=0;while(i<newList.length){item=newList[i];itemKey=getItemKey(item,key);var simulateItem=simulateList[j];var simulateItemKey=getItemKey(simulateItem,key);if(simulateItem){if(itemKey===simulateItemKey){j++}else{if(!oldKeyIndex.hasOwnProperty(itemKey)){insert(i,item)}else{var nextItemKey=getItemKey(simulateList[j+1],key);if(nextItemKey===itemKey){remove(i);removeSimulate(j);j++}else{insert(i,item)}}}}else{insert(i,item)}i++}function remove(index){var move={index:index,type:0};moves.push(move)}function insert(index,item){var move={index:index,item:item,type:1};moves.push(move)}function removeSimulate(index){simulateList.splice(index,1)}return{moves:moves,children:children}}function makeKeyIndexAndFree(list,key){var keyIndex={};var free=[];for(var i=0,len=list.length;i<len;i++){var item=list[i];var itemKey=getItemKey(item,key);if(itemKey){keyIndex[itemKey]=i}else{free.push(item)}}return{keyIndex:keyIndex,free:free}}function getItemKey(item,key){if(!item||!key)return void 666;return typeof key==='string'?item[key]:key(item)}exports.makeKeyIndexAndFree=makeKeyIndexAndFree;exports.diff=diff},function(module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};module.exports={is:function is(o,type){var isnan={"NaN":1,"Infinity":1,"-Infinity":1};type=type.toLowerCase();if(type=="finite"){return!isnan["hasOwnProperty"](+o)}if(type=="array"){return o instanceof Array}return type=="null"&&o===null||type==(typeof o==="undefined"?"undefined":_typeof(o))&&o!==null||type=="object"&&o===Object(o)||type=="array"&&Array.isArray&&Array.isArray(o)||Object.prototype.toString.call(o).slice(8,-1).toLowerCase()==type},htmlspecialchars_decode:function htmlspecialchars_decode(string,quoteStyle){var optTemp=0;var i=0;var noquotes=false;if(typeof quoteStyle==='undefined'){quoteStyle=2}string=string.toString().replace(/&lt;/g,'<').replace(/&gt;/g,'>');var OPTS={'ENT_NOQUOTES':0,'ENT_HTML_QUOTE_SINGLE':1,'ENT_HTML_QUOTE_DOUBLE':2,'ENT_COMPAT':2,'ENT_QUOTES':3,'ENT_IGNORE':4};if(quoteStyle===0){noquotes=true}if(typeof quoteStyle!=='number'){quoteStyle=[].concat(quoteStyle);for(i=0;i<quoteStyle.length;i++){if(OPTS[quoteStyle[i]]===0){noquotes=true}else if(OPTS[quoteStyle[i]]){optTemp=optTemp|OPTS[quoteStyle[i]]}}quoteStyle=optTemp}if(quoteStyle&OPTS.ENT_HTML_QUOTE_SINGLE){string=string.replace(/&#0*39;/g,"'")}if(!noquotes){string=string.replace(/&quot;/g,'"')}string=string.replace(/&amp;/g,'&');return string}}},function(module,exports){'use strict';var document=window.document;var fns=[];var args=[];var isReady=false;var errorHandler=null;var call=function call(fn){try{fn.apply(this,args)}catch(e){if(errorHandler!==null){errorHandler.call(this,e)}}};var run=function run(){var x;isReady=true;for(x=0;x<fns.length;x=x+1){call(fns[x])}fns=[]};var init=function init(){if(window.addEventListener){document.addEventListener('DOMContentLoaded',function(){run()},false)}else{var poll=function poll(){if(!document.uniqueID&&document.expando){return}var tempNode=document.createElement('document:ready');try{tempNode.doScroll('left');run()}catch(e){window.setTimeout(poll,10)}};document.onreadystatechange=function(){if(document.readyState==='complete'){document.onreadystatechange=null;run()}};poll()}};var domReady=function domReady(fn){return domReady.on(fn)};domReady.on=function(fn){if(isReady){call(fn)}else{fns[fns.length]=fn}return this};domReady.params=function(params){args=params;return this};domReady.error=function(fn){errorHandler=fn;return this};init();module.exports=domReady}]);